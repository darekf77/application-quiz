"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[948],{78948:(R,Q,s)=>{s.r(Q),s.d(Q,{QuestionContainerModule:()=>X});var v=s(35923),g=s(27664),C=s(63320),a=s(47933),x=s(29980),A=s(34741),y=s(21765),u=s(74573),f=s(86619),d=s(51415),t=s(70459),r=s(6620),F=s(43137),T=s(36890),J=s(52801),L=s(59196);function I(n,i){1&n&&t._uU(0," loading answer with question... ")}function S(n,i){if(1&n&&(t.TgZ(0,"mat-list-option",7),t.ALo(1,"async"),t._UZ(2,"answer",8),t.qZA()),2&n){const e=i.$implicit,o=t.oxw(2);t.Q6J("selected",t.lcZ(1,3,o.selectedAnswersForQuestion$).includes(e.id))("value",e.id),t.xp6(2),t.Q6J("answer",e)}}function U(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"question",2)(2,"mat-selection-list",3,4),t.NdJ("selectionChange",function(c){t.CHM(e);const l=t.oxw();return t.KtG(l.onSelectionChange(c))}),t.YNc(4,S,3,5,"mat-list-option",5),t.qZA()(),t._UZ(5,"br"),t.TgZ(6,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.goPrev(l))}),t._uU(7,"Prev"),t.qZA(),t._uU(8," \xa0\xa0 "),t.TgZ(9,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.goNext(l))}),t._uU(10,"Next"),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("question",e),t.xp6(3),t.Q6J("ngForOf",null==e?null:e.answers),t.xp6(2),t.Q6J("disabled",!e.prevOid),t.xp6(3),t.Q6J("disabled",!e.nextOid)}}let Z=(()=>{class n{constructor(e,o){this.store=e,this.appService=o,this.selectedAnswersForQuestion$=this.store.select(C.G)}set id(e){u.isNil(e)||(e=Number(e)),u.isNumber(e)&&!u.isNaN(e)?(this.question$=this.store.select(C.w).pipe((0,x.U)(o=>f.HN.from(o))),this.store.dispatch(a.Pu({questionOid:e}))):this.question$=(0,A.of)(void 0)}onSelectionChange(e){this.store.dispatch(a.Z5({answersIds:e.source._value}))}goNext(e){var o=this;return(0,g.Z)(function*(){const c=yield(0,y.z)(o.store.select(d.LL.selectedTopic));o.appService.go(c.topicTitleKebabCase,e.nextOid)})()}goPrev(e){var o=this;return(0,g.Z)(function*(){const c=yield(0,y.z)(o.store.select(d.LL.selectedTopic));o.appService.go(c.topicTitleKebabCase,e.prevOid)})()}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.yh),t.Y36(d.zi))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-question"]],inputs:{id:["questionOid","id"]},decls:4,vars:3,consts:[["loader",""],[4,"ngIf"],[3,"question"],[3,"selectionChange"],["shoes",""],[3,"selected","value",4,"ngFor","ngForOf"],["mat-raised-button","",3,"disabled","click"],[3,"selected","value"],[3,"answer"]],template:function(e,o){1&e&&(t.YNc(0,I,1,0,"ng-template",null,0,t.W1O),t.YNc(2,U,11,4,"ng-container",1),t.ALo(3,"async")),2&e&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,o.question$)))},dependencies:[v.sg,v.O5,F.lW,T.Ub,T.vS,J.p,L.Y,v.Ov]}),n})();var h=s(83306),$=s(85121),w=s(79212),M=s(3697),G=s(1760);let O=(()=>{class n{constructor(e,o){this.actions$=e,this.store=o,this.fetchQuestions=(0,h.GW)(()=>this.actions$.pipe((0,h.l4)(a.Pu),(0,$.p)(1e3),(0,w.M)(this.store.select(d.LL.selectedTopic)),(0,M.w)(([{questionOid:c},l])=>{const{topicTitleKebabCase:p}=l;return f.HN.ctrl.getQuestionWithAswers(c,p).received.observable.pipe((0,x.U)(m=>a.UW({question:m.body.rawJson})),(0,G.K)(m=>(0,A.of)(a.u4({error:m}))))})))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(h.eX),t.LFG(r.yh))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var z=s(25993),N=s(40897),H=s(26598);const K=(0,r.Lq)({currentQuestion:void 0,selectedAnswersIds:[],allAnswers:[]},(0,r.on)(a.qg,n=>({...n,currentQuestion:null})),(0,r.on)(d.xZ.CHANGE_TOPIC,n=>({...n,currentQuestion:null})),(0,r.on)(a.UW,(n,{question:i})=>{const e=u.cloneDeep(i),o=u.cloneDeep(N.ZH.arrays.uniqArray([...n.allAnswers,...i.answers],"id"));return{...n,currentQuestion:e,allAnswers:o}}),(0,r.on)(H.iT,(n,i)=>({...n,selectedAnswersIds:[]})),(0,r.on)(a.Z5,(n,i)=>{const e=u.cloneDeep(N.ZH.arrays.uniqArray([...n.selectedAnswersIds,...i.answersIds]));return{...n,selectedAnswersIds:e}}));let E=(()=>{class n{constructor(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var P=s(73044),W=s(10839),B=s(1507);const D=[{path:"",pathMatch:"full",component:Z},{path:"num/:questionOid",component:Z}];let X=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[E],imports:[v.ez,P.Bz.forChild(D),r.Aw.forFeature(z.B,K),h.sQ.forFeature([O]),W.a8,B.m0,f.Nz,f.gO]}),n})()}}]);